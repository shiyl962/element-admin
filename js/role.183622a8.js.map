{"version":3,"sources":["webpack:///./src/views/permis/Role.vue?ce6d","webpack:///./src/views/permis/Role.vue?7100","webpack:///src/views/permis/Role.vue","webpack:///./src/views/permis/Role.vue?0059","webpack:///./src/views/permis/Role.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","attrs","tableData","scopedSlots","_u","key","fn","scope","on","$event","editOpen","row","_v","groupDialog","visible","slot","addOpen","dialog","roleId","$set","ref","form","required","message","trigger","model","value","callback","$$v","expression","_l","item","pageId","_s","title","isAdd","staticClass","submitForm","treeData","allowDrop","node","data","children","edit","id","type","clearable","rules","titleRules","class","icon","submitItem","closeEditItem","stopPropagation","editTreeItem","_e","staticRenderFns","name","components","pages","roleName","description","role","permission","affix","path","hidden","min","max","getPagesList","methods","setTimeout","forEach","$refs","resetFields","found","find","i","validate","valid","Object","assign","filter","console","log","draggingNode","dropNode","initValue","validateRow","then","catch","errors","$message","error","component"],"mappings":"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","file":"js/role.183622a8.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Role.vue?vue&type=style&index=0&id=55a3fbfe&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Role.vue?vue&type=style&index=0&id=55a3fbfe&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"roleId\",\"label\":\"Id\",\"align\":\"center\",\"width\":\"220\"}}),_c('el-table-column',{attrs:{\"prop\":\"roleName\",\"label\":\"角色名称\",\"align\":\"center\",\"width\":\"220\"}}),_c('el-table-column',{attrs:{\"prop\":\"description\",\"label\":\"备注\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.editOpen(scope.row)}}},[_vm._v(\" 编辑权限 \")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){_vm.groupDialog.visible = true}}},[_vm._v(\" 菜单分组 \")]),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"small\"}},[_vm._v(\" 删除 \")])]}}])},[_c('template',{slot:\"header\"},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\",\"icon\":\"el-icon-document-add\"},on:{\"click\":_vm.addOpen}},[_vm._v(\"新 增\")])],1)],2)],1),_c('el-dialog',{attrs:{\"title\":_vm.dialog.roleId ? '编辑' : '新增角色',\"visible\":_vm.dialog.visible},on:{\"update:visible\":function($event){return _vm.$set(_vm.dialog, \"visible\", $event)}}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.dialog.form,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"角色名称\",\"prop\":\"roleName\",\"rules\":[\n          { required: true, message: '请输入角色名称', trigger: 'blur' } ]}},[_c('el-input',{model:{value:(_vm.dialog.form.roleName),callback:function ($$v) {_vm.$set(_vm.dialog.form, \"roleName\", $$v)},expression:\"dialog.form.roleName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"备注\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":2},model:{value:(_vm.dialog.form.description),callback:function ($$v) {_vm.$set(_vm.dialog.form, \"description\", $$v)},expression:\"dialog.form.description\"}})],1),_c('el-form-item',{attrs:{\"label\":\"页面权限\"}},_vm._l((_vm.pages),function(item){return _c('div',{key:item.pageId},[_c('el-checkbox',{staticStyle:{\"width\":\"100px\"},model:{value:(item.isAdd),callback:function ($$v) {_vm.$set(item, \"isAdd\", $$v)},expression:\"item.isAdd\"}},[_vm._v(_vm._s(item.title)+\" \")]),_c('el-checkbox',{attrs:{\"disabled\":!item.isAdd},model:{value:(item.permission),callback:function ($$v) {_vm.$set(item, \"permission\", $$v)},expression:\"item.permission\"}},[_vm._v(\"permission\")]),_c('el-checkbox',{attrs:{\"disabled\":!item.isAdd},model:{value:(item.hidden),callback:function ($$v) {_vm.$set(item, \"hidden\", $$v)},expression:\"item.hidden\"}},[_vm._v(\" hidden \")]),_c('el-checkbox',{attrs:{\"disabled\":!item.isAdd},model:{value:(item.affix),callback:function ($$v) {_vm.$set(item, \"affix\", $$v)},expression:\"item.affix\"}},[_vm._v(\" affix \")])],1)}),0)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialog.visible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitForm}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{staticClass:\"my-dialog\",attrs:{\"title\":\"分组设置\",\"visible\":_vm.groupDialog.visible},on:{\"update:visible\":function($event){return _vm.$set(_vm.groupDialog, \"visible\", $event)}}},[_c('div',{staticStyle:{\"padding\":\"10px\"}},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\",\"plain\":\"\",\"icon\":\"el-icon-plus\"}},[_vm._v(\"新增分组\")])],1),_c('div'),_c('el-tree',{attrs:{\"data\":_vm.groupDialog.treeData,\"node-key\":\"id\",\"draggable\":\"\",\"allow-drop\":_vm.allowDrop,\"expand-on-click-node\":false},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\n        var node = ref.node;\n        var data = ref.data;\nreturn _c('div',{staticClass:\"custom-tree-node\"},[_c('div',{staticClass:\"custom-tree-node-item\"},[(data.children && data.edit)?[_c('EditItem',{ref:'edit-icon-' + data.id,staticStyle:{\"margin-right\":\"10px\"},attrs:{\"options\":{\n                type: 'icon',\n                clearable: true,\n              },\"hidden-message\":true,\"size\":\"mini\"},model:{value:(data.icon),callback:function ($$v) {_vm.$set(data, \"icon\", $$v)},expression:\"data.icon\"}}),_c('EditItem',{ref:'edit-title-' + data.id,attrs:{\"options\":{ clearable: true, rules: _vm.titleRules },\"hidden-message\":true,\"size\":\"mini\"},model:{value:(data.title),callback:function ($$v) {_vm.$set(data, \"title\", $$v)},expression:\"data.title\"}})]:[_c('div',{staticStyle:{\"margin-right\":\"10px\"}},[_c('i',{class:data.icon})]),_c('div',[_vm._v(_vm._s(data.title))])]],2),(data.children)?_c('div',[(data.edit)?[_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.submitItem(data)}}},[_vm._v(\" 保存 \")]),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.closeEditItem(data)}}},[_vm._v(\" 取消 \")])]:_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.editTreeItem(data)}}},[_vm._v(\" 编辑 \")]),_c('el-button',{staticStyle:{\"color\":\"#F56C6C\"},attrs:{\"type\":\"text\",\"size\":\"mini\"}},[_vm._v(\" 删除 \")])],2):_vm._e()])}}])}),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.groupDialog.visible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"}},[_vm._v(\"保 存\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <el-table :data=\"tableData\" border style=\"width: 100%\">\n      <el-table-column prop=\"roleId\" label=\"Id\" align=\"center\" width=\"220\">\n      </el-table-column>\n      <el-table-column\n        prop=\"roleName\"\n        label=\"角色名称\"\n        align=\"center\"\n        width=\"220\"\n      >\n      </el-table-column>\n      <el-table-column prop=\"description\" label=\"备注\"> </el-table-column>\n      <el-table-column label=\"操作\" align=\"center\">\n        <template slot=\"header\">\n          <el-button\n            @click=\"addOpen\"\n            size=\"small\"\n            type=\"primary\"\n            icon=\"el-icon-document-add\"\n            >新 增</el-button\n          >\n        </template>\n        <template slot-scope=\"scope\">\n          <el-button @click=\"editOpen(scope.row)\" size=\"small\" type=\"primary\">\n            编辑权限\n          </el-button>\n          <el-button\n            size=\"small\"\n            @click=\"groupDialog.visible = true\"\n            type=\"primary\"\n          >\n            菜单分组\n          </el-button>\n          <el-button type=\"danger\" size=\"small\">\n            删除\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <el-dialog\n      :title=\"dialog.roleId ? '编辑' : '新增角色'\"\n      :visible.sync=\"dialog.visible\"\n    >\n      <el-form ref=\"form\" :model=\"dialog.form\" label-width=\"80px\">\n        <el-form-item\n          label=\"角色名称\"\n          prop=\"roleName\"\n          :rules=\"[\n            { required: true, message: '请输入角色名称', trigger: 'blur' },\n          ]\"\n        >\n          <el-input v-model=\"dialog.form.roleName\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"备注\">\n          <el-input\n            v-model=\"dialog.form.description\"\n            type=\"textarea\"\n            :rows=\"2\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"页面权限\">\n          <div v-for=\"item in pages\" :key=\"item.pageId\">\n            <el-checkbox v-model=\"item.isAdd\" style=\"width:100px\"\n              >{{ item.title }}\n            </el-checkbox>\n            <el-checkbox v-model=\"item.permission\" :disabled=\"!item.isAdd\"\n              >permission</el-checkbox\n            >\n            <el-checkbox v-model=\"item.hidden\" :disabled=\"!item.isAdd\">\n              hidden\n            </el-checkbox>\n            <el-checkbox v-model=\"item.affix\" :disabled=\"!item.isAdd\">\n              affix\n            </el-checkbox>\n          </div>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialog.visible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\n      </span>\n    </el-dialog>\n\n    <el-dialog\n      class=\"my-dialog\"\n      title=\"分组设置\"\n      :visible.sync=\"groupDialog.visible\"\n    >\n      <div style=\"padding:10px\">\n        <el-button size=\"mini\" type=\"primary\" plain icon=\"el-icon-plus\"\n          >新增分组</el-button\n        >\n      </div>\n      <div></div>\n      <el-tree\n        :data=\"groupDialog.treeData\"\n        node-key=\"id\"\n        draggable\n        :allow-drop=\"allowDrop\"\n        :expand-on-click-node=\"false\"\n      >\n        <div class=\"custom-tree-node\" slot-scope=\"{ node, data }\">\n          <div class=\"custom-tree-node-item\">\n            <template v-if=\"data.children && data.edit\">\n              <EditItem\n                :ref=\"'edit-icon-' + data.id\"\n                v-model=\"data.icon\"\n                :options=\"{\n                  type: 'icon',\n                  clearable: true,\n                }\"\n                :hidden-message=\"true\"\n                size=\"mini\"\n                style=\"margin-right:10px\"\n              ></EditItem>\n              <EditItem\n                :ref=\"'edit-title-' + data.id\"\n                v-model=\"data.title\"\n                :options=\"{ clearable: true, rules: titleRules }\"\n                :hidden-message=\"true\"\n                size=\"mini\"\n              ></EditItem>\n            </template>\n\n            <template v-else>\n              <div style=\"margin-right:10px\">\n                <i :class=\"data.icon\"></i>\n              </div>\n              <div>{{ data.title }}</div>\n            </template>\n          </div>\n\n          <div v-if=\"data.children\">\n            <template v-if=\"data.edit\">\n              <el-button @click=\"submitItem(data)\" type=\"text\" size=\"mini\">\n                保存\n              </el-button>\n              <el-button @click=\"closeEditItem(data)\" type=\"text\" size=\"mini\">\n                取消\n              </el-button>\n            </template>\n            <el-button\n              v-else\n              type=\"text\"\n              size=\"mini\"\n              @click.stop=\"editTreeItem(data)\"\n            >\n              编辑\n            </el-button>\n\n            <el-button type=\"text\" size=\"mini\" style=\"color:#F56C6C\">\n              删除\n            </el-button>\n          </div>\n        </div>\n      </el-tree>\n\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"groupDialog.visible = false\" size=\"small\"\n          >取 消</el-button\n        >\n        <el-button type=\"primary\" size=\"small\">保 存</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Role\",\n  components: {},\n  data() {\n    return {\n      pages: [],\n      tableData: [\n        {\n          roleId: \"0\",\n          roleName: \"admin\",\n          description:\n            \"当前账号相当于admin，这些全是admin下的子角色，admin 就是超级管理员，系统应该自己初始化，不需要创建，也不能被修改\",\n          role: [\n            {\n              pageId: \"1\",\n              permission: true,\n              affix: true,\n            },\n            {\n              pageId: \"2\",\n              permission: true,\n            },\n            {\n              pageId: \"3\",\n              permission: true,\n            },\n            {\n              pageId: \"4\",\n              permission: true,\n            },\n            {\n              pageId: \"5\",\n              permission: true,\n            },\n          ],\n        },\n        {\n          roleId: \"1\",\n          roleName: \"开发人员\",\n          description: \"开发人员也可以拥有全部权限\",\n          role: [\n            {\n              pageId: \"1\",\n              permission: true,\n              affix: true,\n            },\n            {\n              pageId: \"2\",\n              permission: true,\n            },\n            {\n              pageId: \"3\",\n              permission: true,\n            },\n            {\n              pageId: \"4\",\n              permission: true,\n            },\n            {\n              pageId: \"5\",\n              permission: true,\n            },\n          ],\n        },\n        {\n          roleId: \"2\",\n          roleName: \"管理员\",\n          description: \"角色管理和用户管理的权限应该保持一致\",\n          role: [\n            {\n              pageId: \"1\",\n              permission: true,\n              affix: true,\n            },\n            {\n              pageId: \"3\",\n              permission: true,\n            },\n            {\n              pageId: \"4\",\n              permission: true,\n            },\n            {\n              pageId: \"5\",\n              permission: true,\n            },\n          ],\n        },\n        {\n          roleId: \"3\",\n          roleName: \"管理员2\",\n          description:\n            \"每个角色只能操作自己创建的子角色，并且只能分配自己拥有权限的页面\",\n          role: [],\n        },\n      ],\n      dialog: {\n        visible: false,\n        roleId: \"\", // 编辑时\n        form: {\n          roleName: \"\",\n          description: \"\",\n        },\n      },\n      groupDialog: {\n        visible: false,\n        roleId: \"\", // 编辑时\n        treeData: [\n          {\n            id: \"1\",\n            path: \"/index\",\n            title: \"首页\",\n            icon: \"el-icon-s-home\",\n            affix: true,\n          },\n          {\n            id: \"2\",\n            title: \"权限管理\",\n            icon: \"el-icon-s-tools\",\n            children: [\n              {\n                id: \"2-1\",\n                path: \"/permis/menu\",\n                title: \"菜单管理\",\n              },\n              {\n                id: \"2-2\",\n                path: \"/permis/role\",\n                title: \"角色管理\",\n              },\n              {\n                id: \"2-3\",\n                path: \"/permis/account\",\n                title: \"用户管理\",\n              },\n            ],\n          },\n          {\n            id: \"3\",\n            path: \"/icon\",\n            title: \"图标\",\n            icon: \"el-icon-s-opportunity\",\n          },\n          {\n            id: \"4\",\n            path: \"/about\",\n            title: \"数据看板\",\n            icon: \"el-icon-s-marketing\",\n          },\n          {\n            id: \"5\",\n            title: \"嵌套路由\",\n            icon: \"el-icon-finished\",\n            children: [\n              {\n                id: \"5-1\",\n                hidden: true,\n                path: \"/menu1\",\n                title: \"回到顶部\",\n                icon: \"el-icon-caret-top\",\n              },\n              {\n                id: \"5-2\",\n                path: \"/menu2\",\n                title: \"换肤预览\",\n                icon: \"el-icon-s-marketing\",\n              },\n              {\n                id: \"5-3\",\n                path: \"/menu3\",\n                title: \"无权限\",\n                icon: \"el-icon-s-marketing\",\n                permission: false,\n              },\n            ],\n          },\n        ],\n      },\n      titleRules: [\n        { required: true, message: \"请输入菜单名称\" },\n        {\n          min: 2,\n          max: 5,\n          message: \"长度在 2 到 5 个字符\",\n        },\n      ],\n    };\n  },\n  created() {\n    this.getPagesList();\n  },\n  methods: {\n    getPagesList() {\n      // 获取的有分配权限的所有页面\n      const pages = [\n        {\n          pageId: \"1\",\n          title: \"首页\",\n        },\n        {\n          pageId: \"2\",\n          title: \"菜单管理\",\n        },\n        {\n          pageId: \"3\",\n          title: \"角色管理\",\n        },\n        {\n          pageId: \"4\",\n          title: \"用户管理\",\n        },\n        {\n          pageId: \"5\",\n          title: \"图标\",\n        },\n      ];\n      setTimeout(() => {\n        this.pages = pages;\n        this.pages.forEach((item) => {\n          this.$set(item, \"permission\", false);\n          this.$set(item, \"hidden\", false);\n          this.$set(item, \"affix\", false);\n        });\n      }, 200);\n    },\n    // 打开新增弹窗\n    addOpen() {\n      this.dialog.roleId = \"\";\n      this.dialog.form = {\n        roleName: \"\",\n        description: \"\",\n      };\n      this.pages.forEach((item) => {\n        this.$set(item, \"isAdd\", false);\n        this.$set(item, \"permission\", false);\n        this.$set(item, \"hidden\", false);\n        this.$set(item, \"affix\", false);\n      });\n      this.$refs.form && this.$refs.form.resetFields();\n      this.dialog.visible = true;\n    },\n    // 打开编辑弹窗\n    editOpen(row) {\n      this.dialog.roleId = row.roleId;\n      this.dialog.form = {\n        roleName: row.roleName,\n        description: row.description,\n      };\n      this.pages.forEach((item) => {\n        const found = row.role.find((i) => i.pageId === item.pageId);\n        if (found) {\n          this.$set(item, \"isAdd\", true);\n          this.$set(item, \"permission\", found.permission || false); // 如果有权限必须返回true\n          this.$set(item, \"hidden\", found.hidden || false);\n          this.$set(item, \"affix\", found.affix || false);\n        } else {\n          this.$set(item, \"isAdd\", false);\n          this.$set(item, \"permission\", false);\n          this.$set(item, \"hidden\", false);\n          this.$set(item, \"affix\", false);\n        }\n      });\n      this.$refs.form && this.$refs.form.resetFields();\n      this.dialog.visible = true;\n    },\n    submitForm() {\n      this.$refs.form.validate((valid) => {\n        if (valid) {\n          const data = Object.assign(\n            { roleId: this.dialog.roleId },\n            this.dialog.form\n          );\n          data.role = this.pages.filter((item) => item.isAdd);\n          console.log(data);\n        }\n      });\n    },\n\n    allowDrop(draggingNode, dropNode, type) {\n      if (dropNode.data.path) {\n        return type !== \"inner\";\n      } else {\n        return true;\n      }\n    },\n    // 编辑分组\n    editTreeItem(data) {\n      this.$set(data, \"edit\", true);\n    },\n    // 取消编辑分组\n    closeEditItem(data) {\n      this.$set(data, \"edit\", false);\n      this.$set(data, \"icon\", this.$refs[\"edit-icon-\" + data.id].initValue);\n      this.$set(data, \"title\", this.$refs[\"edit-title-\" + data.id].initValue);\n    },\n    submitItem(data) {\n      this.$refs[\"edit-title-\" + data.id]\n        .validateRow()\n        .then(() => {\n          console.log(\"校验通过\");\n        })\n        .catch((errors) => {\n          this.$message.error(errors[0].message);\n        });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.my-dialog >>> .el-dialog__body {\n  padding: 0 20px;\n}\n.el-tree >>> .el-tree-node__content {\n  height: 36px;\n}\n.custom-tree-node {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 14px;\n  padding-right: 8px;\n}\n.custom-tree-node-item {\n  display: flex;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Role.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Role.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Role.vue?vue&type=template&id=55a3fbfe&scoped=true&\"\nimport script from \"./Role.vue?vue&type=script&lang=js&\"\nexport * from \"./Role.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Role.vue?vue&type=style&index=0&id=55a3fbfe&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"55a3fbfe\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}